{% load staticfiles %}

<!DOCTYPE HTML>
<html lang="el-GR">
	<head>
    <title>SurvGR</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--jQuery-->
    <script src="//code.jquery.com/jquery-2.2.0.min.js"></script> 
    <!--Open Layers 3-->
    <link rel="stylesheet" href="//openlayers.org/en/v3.13.0/css/ol.css" type="text/css">
    <script src="//openlayers.org/en/v3.13.0/build/ol.js" type="text/javascript"></script>
    <!--Bootstrap 3-->
    <link href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.6/lumen/bootstrap.min.css" rel="stylesheet">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <!--Twitter typeahead-->
    <script src="{% static 'transform/js/typeahead.js' %}" type="text/javascript"></script>
    <link href="{% static 'transform/css/typeaheadjs.css' %}" rel="stylesheet">
    <!--styling-->
    <link href="//fonts.googleapis.com/css?family=Ubuntu&subset=latin,greek" rel='stylesheet' type='text/css'>
    <link href="{% static 'transform/css/index.css' %}" rel="stylesheet">
  </head>

  <body>
    
    <div class="container">
      <div class="page-header">
        <h1>SurvGR  <small>μετασχηματισμός συντεταγμένων</small></h1>
      </div>

      {% regroup ref_systems|dictsortreversed:"datum" by datum as datums %}
    	<form id="form-params" class="form" role="form" method="post" action="{% url 'transform' %}">
        
        <div class="row">
          <div class="col-sm-6">
            <div class="panel panel-primary panel-transform-from">
              <div class="panel-heading">
                <h1 class="panel-title">Μετασχηματισμός Από:</h1>
              </div>
              <div class="panel-body">
                <!--From Reference system selection -->
                <div class="form-group">
                  <label for="from-srid" class="form-control-label" >Σύστημα αναφοράς:</label>
                  <select id="from-srid" name="from_srid" class="srid-selection form-control">
            			{% for datum in datums %}
             				<optgroup label="{{ datum.grouper }}">
            				{% for refsys in datum.list %}
            					<option value="{{ refsys.srid }}">{{ refsys.name }}</option>
            				{% endfor %}
            				</optgroup>
            			{% endfor %}
            			</select>
                </div>
                <!--From Hattblock selection-->
                <div id="from-hatt" class="hatt-selection form-group">
                  <label for="from-hatt-name" class="form-control-label">Φύλλο χάρτη ΓΥΣ 1:50.000:</label>
                  <div class="input-group">
                    <input type="text" id="from-hatt-name" class="hatt-name form-control typeahead" autocomplete="off" placeholder="Εισάγετε όνομα&hellip;" ></input>
                    <input type="hidden" class="hatt-id" name="from_hatt_id" value="-1"/>
                    <span class="input-group-btn">
                      <button type="button" class="btn btn-default" data-toggle="modal" data-target="#mapModal">
                        <span class="glyphicon glyphicon-map-marker"></span> Επιλογή
                      </button>
                    </span>
                  </div>
                </div>
                <p class="help-block"></p>
                <!--input points-->
                <div class="form-group">
                  <label for="input-points" class="form-control-label">Εισαγωγή σημείων:</label>
                  <textarea id="input-points" class="form-control" rows="10"></textarea>
                </div>
                 <div class="form-group">
                  <button id="go" class="btn btn-primary">Μετασχημάτισε</button>
                </div>
              </div>
            </div> <!--panel from-->
          </div> 
          
          <div class="col-sm-6">
            <div class="panel panel-warning panel-transform-to">
              <div class="panel-heading">
                <h1 class="panel-title">Μετασχηματισμός Πρός:</h1>
              </div>
              <div class="panel-body">
                <!--To Reference system selection -->
                <div class="form-group">
                  <label for="to-srid" class="form-control-label">Σύστημα αναφοράς:</label>          
                  <select id="to-srid" name="to_srid" class="srid-selection form-control">
                  {% for datum in datums %}
                    <optgroup label="{{ datum.grouper }}">
                    {% for refsys in datum.list %}
                      <option value="{{ refsys.srid }}">{{ refsys.name }}</option>
                    {% endfor %}
                    </optgroup>
                  {% endfor %}
                  </select>
                </div>
                <!--To Hattblock selection-->
                <div id="to-hatt" class="hatt-selection form-group">
                  <label for="to-hatt-name" class="form-control-label">Φύλλο χάρτη ΓΥΣ 1:50.000:</label>
                  <div class="input-group">
                    <input type="text" id="to-hatt-name" class="hatt-name form-control typeahead" autocomplete="off" placeholder="Εισάγετε όνομα&hellip;" ></input>
                    <input type="hidden" class="hatt-id" name="to_hatt_id" value="-1"/>
                    <span class="input-group-btn">
                      <button type="button" class="btn btn-default" data-toggle="modal" data-target="#mapModal">
                        <span class="glyphicon glyphicon-map-marker"></span> Επιλογή
                      </button>
                    </span>
                  </div>
                </div>
                <!--output points-->
                <div class="form-group">
                  <label for="output-points" class="form-control-label">Αποτελέσματα:</label>
                  <textarea id="output-points" class="form-control" rows="10"></textarea>
                </div>
              </div>
            </div>  <!--panel to-->
          </div>
        </div> <!--row-->

      </form>

    </div> <!--container-->

    <!--hattblocks map modal-->
    <div id="mapModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mapModalLabel">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title" id="mapModalLabel"></h4>
          </div>
          <div class="modal-body">
            <h4 id="selected-feature-name">Επιλογή</h4>
            <div class="map" id="map"></div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Επιστροφή</button>
          </div>
        </div>
      </div>
    </div>
  
    <script type="text/javascript">
      var HATTBLOCK_FEATURES_URL = "{% static 'transform/assets/hattblocks.min.geojson' %}";
    </script>
  	<script src="{% static 'transform/js/index.js' %}" type="text/javascript"></script>	 
  </body>
</html>